"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1375],{1375:(I,p,c)=>{c.r(p),c.d(p,{PostsPageModule:()=>b});var l=c(6019),u=c(9010),i=c(2651),g=c(8725),d=c(4762),t=c(865),h=c(7118);function P(e,s){1&e&&t._UZ(0,"ion-icon",4)}function f(e,s){1&e&&t._UZ(0,"ion-icon",5)}function _(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"ion-item",1),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.oxw().selectCat(a)}),t.YNc(1,P,1,0,"ion-icon",2),t.YNc(2,f,1,0,"ion-icon",3),t._uU(3),t.qZA()}if(2&e){const o=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.selected===o.id),t.xp6(1),t.Q6J("ngIf",n.selected!==o.id),t.xp6(1),t.hij(" ",o.name," ")}}let m=(()=>{class e{constructor(o,n){this.api=o,this.popoverCtrl=n,this.categories=[],this.selected=null}ngOnInit(){this.api.getCategories().subscribe(o=>{this.categories=o,this.categories.unshift({name:"All",id:null})})}selectCat(o){this.popoverCtrl.dismiss(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.s),t.Y36(i.Dh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-category-filter"]],decls:3,vars:1,consts:[["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["name","checkmark","slot","start",4,"ngIf"],["name","information","slot","start",4,"ngIf"],["name","checkmark","slot","start"],["name","information","slot","start"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-content"),t.TgZ(1,"ion-list"),t.YNc(2,_,4,3,"ion-item",0),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Q6J("ngForOf",n.categories))},directives:[i.W2,i.q_,l.sg,i.Ie,l.O5,i.gu],styles:[""]}),e})();var Z=c(1346);function y(e,s){if(1&e&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" Found ",o.totalPosts," ")}}function T(e,s){if(1&e&&t._UZ(0,"img",14),2&e){const o=t.oxw().$implicit;t.Q6J("src",o.media_url,t.LSH)}}const C=function(e){return["/","posts",e]};function F(e,s){if(1&e&&(t.TgZ(0,"ion-card"),t.TgZ(1,"ion-card-header"),t._UZ(2,"ion-card-title",11),t.TgZ(3,"ion-card-subtitle"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.qZA(),t.TgZ(6,"ion-card-content"),t.YNc(7,T,1,1,"img",12),t._UZ(8,"div",11),t.TgZ(9,"ion-button",13),t._uU(10,"Read More..."),t.qZA(),t.qZA(),t.qZA()),2&e){const o=s.$implicit;t.xp6(2),t.Q6J("innerHTML",o.title.rendered,t.oJD),t.xp6(2),t.Oqu(t.lcZ(5,5,o.date_gmt)),t.xp6(3),t.Q6J("ngIf",o.media_url),t.xp6(1),t.Q6J("innerHTML",o.excerpt.rendered,t.oJD),t.xp6(1),t.Q6J("routerLink",t.VKq(7,C,o.id))}}const M=[{path:"",component:(()=>{class e{constructor(o,n,r,a){this.api=o,this.loadingCtrl=n,this.popoverCtrl=r,this.route=a,this.page=1,this.posts=[],this.totalPages=0,this.totalPosts=0,this.categoryFilter=null,this.searchTerm="",this.subscription=new Z.w}ngOnInit(){}ionViewWillEnter(){this.subscription=this.route.queryParamMap.subscribe(o=>{this.categoryFilter=o.get("category"),this.loadPosts()})}loadPosts(o=null){return(0,d.mG)(this,void 0,void 0,function*(){let n=null;o||(n=yield this.loadingCtrl.create({message:"Loading Data..."}),yield n.present()),this.api.getPosts(this.page,this.categoryFilter,this.searchTerm).subscribe(r=>{console.log("res: ",r),o?(o.target.complete(),this.posts=[...this.posts,...r.posts],this.page==this.totalPages&&(o.target.disabled=!0)):this.posts=r.posts,this.totalPages=r.pages,this.totalPosts=r.totalPosts},r=>{n.dismiss(),console.log("error: ",r)},()=>{o||n.dismiss()})})}loadMore(o){this.page++,this.loadPosts(o)}openFilter(o){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.popoverCtrl.create({component:m,event:o,translucent:!0,componentProps:{selected:this.categoryFilter}});n.onDidDismiss().then(r=>{r&&r.data&&(this.categoryFilter=r.data.id,this.loadPosts())}),yield n.present()})}searchChanged(o){this.page=1,this.loadPosts()}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.s),t.Y36(i.HT),t.Y36(i.Dh),t.Y36(g.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-posts"]],decls:15,vars:4,consts:[["color","primary"],["slot","start"],["slot","end"],[3,"click"],["slot","icon-only",3,"name"],["debounce","400",3,"ngModel","ionChange","ngModelChange"],["class","ion-text-center ion-padding",4,"ngIf"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingText","Loading more posts..."],[1,"ion-text-center","ion-padding"],[3,"innerHTML"],["class","post-img",3,"src",4,"ngIf"],["expand","full","fill","clear","text-right","",3,"routerLink"],[1,"post-img",3,"src"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Blog"),t.qZA(),t.TgZ(6,"ion-buttons",2),t.TgZ(7,"ion-button",3),t.NdJ("click",function(a){return n.openFilter(a)}),t._UZ(8,"ion-icon",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"ion-content"),t.TgZ(10,"ion-searchbar",5),t.NdJ("ionChange",function(a){return n.searchChanged(a)})("ngModelChange",function(a){return n.searchTerm=a}),t.qZA(),t.YNc(11,y,2,1,"div",6),t.YNc(12,F,11,9,"ion-card",7),t.TgZ(13,"ion-infinite-scroll",8),t.NdJ("ionInfinite",function(a){return n.loadMore(a)}),t._UZ(14,"ion-infinite-scroll-content",9),t.qZA(),t.qZA()),2&o&&(t.xp6(8),t.Q6J("name",n.categoryFilter?"pricetag":"pricetag-outline"),t.xp6(2),t.Q6J("ngModel",n.searchTerm),t.xp6(1),t.Q6J("ngIf",n.totalPosts>0),t.xp6(1),t.Q6J("ngForOf",n.posts))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.YG,i.gu,i.W2,i.VI,i.j9,u.JJ,u.On,l.O5,l.sg,i.ju,i.MB,i.PM,i.Zi,i.Dq,i.tO,i.FN,i.YI,g.rH],pipes:[l.uU],styles:[".post-img[_ngcontent-%COMP%]{width:100%;object-fit:cover;height:150px}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),e})();const x=[{path:"",component:m}];let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(x)],g.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,u.u5,i.Pc,A]]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,u.u5,i.Pc,v,J]]}),e})()}}]);